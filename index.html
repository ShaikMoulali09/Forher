<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>For Nazma üíå</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: "Poppins", system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
    }

    body {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: radial-gradient(circle at top, #ffdde1, #ee9ca7);
      overflow: hidden;
    }

    /* HEART SCREEN */
    .heart-screen {
      text-align: center;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      gap: 16px;
    }

    .heart {
      width: 180px;
      height: 160px;
      position: relative;
      cursor: pointer;
      animation: heartFloat 3s ease-in-out infinite;
    }

    @keyframes heartFloat {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    .heart::before,
    .heart::after {
      content: "";
      position: absolute;
      width: 90px;
      height: 140px;
      background: linear-gradient(135deg, #ff4b8b, #ff7597);
      border-radius: 90px 90px 0 0;
      top: 20px;
      box-shadow: 0 8px 18px rgba(0, 0, 0, 0.25);
      z-index: 1;
    }

    .heart::before {
      left: 45px;
      transform: rotate(-45deg);
    }

    .heart::after {
      left: 45px;
      transform: rotate(45deg);
    }

    .heart-text {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 90%;
      transform: translate(-50%, -50%);
      color: #fff;
      font-weight: 600;
      text-align: center;
      z-index: 2;
    }

    .hint-text {
      color: #fff;
      font-size: 14px;
      opacity: 0.9;
    }

    /* MAIN SCENE */
    .scene {
      display: none;
      flex-direction: column;
      align-items: center;
      gap: 20px;
      padding: 20px;
      width: 100%;
      max-width: 720px;
    }

    /* CLOSED LETTER */
    .closed-letter {
      width: 300px;
      height: 190px;
      background: #fff7f3;
      border-radius: 10px;
      display: none;
      position: relative;
      cursor: pointer;
      box-shadow: 0 14px 30px rgba(0,0,0,0.35);
      overflow: hidden;
      animation: popIn 0.6s ease;
    }

    @keyframes popIn {
      from { transform: scale(0.7); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    .flap {
      position: absolute;
      width: 100%;
      height: 50%;
      background: #ffd7c2;
      clip-path: polygon(0 0, 50% 100%, 100% 0);
    }

    .seal {
      position: absolute;
      top: 55%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 56px;
      height: 56px;
      border-radius: 50%;
      background: #b3003b;
      color: white;
      font-size: 28px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 10px rgba(0,0,0,0.35);
    }

    .closed-letter-text {
      position: absolute;
      bottom: 10px;
      width: 100%;
      text-align: center;
      font-size: 15px;
      color: #555;
      font-weight: 500;
    }

    /* SECRET LETTER ENVELOPE */
    .secret-letter {
      background: #fffefd;
    }

    .flap-secret {
      background: #fde6f2;
    }

    .secret-seal {
      background: #ffffff;
      border: 2px solid #f7c7da;
      color: #ff4b8b;
      font-size: 26px;
      box-shadow: 0 4px 16px rgba(255, 137, 171, 0.6);
    }

    .secret-letter .closed-letter-text {
      font-size: 14px;
      color: #7a4b5a;
    }

    /* OPEN LETTER */
    .letter-wrapper {
      display: none;
      width: 100%;
      flex-direction: column;
      align-items: center;
      gap: 16px;
    }

    .letter-paper {
      width: 100%;
      max-width: 680px;
      background: #fffdf7;
      border-radius: 12px;
      padding: 22px 24px;
      border: 1px solid #e5c9a8;
      max-height: 70vh;
      overflow-y: auto;
      box-shadow: 0 16px 30px rgba(0,0,0,0.35);
      font-family: "Georgia", "Times New Roman", serif;
      position: relative;
    }

    .letter-body {
      font-size: 16.5px;
      line-height: 1.8;
      color: #3f2f21;
      padding-right: 6px;
      white-space: pre-line;
    }

    .cursor {
      display: inline-block;
      margin-left: 2px;
      width: 8px;
      animation: blink 1s steps(2, start) infinite;
    }

    @keyframes blink {
      0%, 49% { opacity: 1; }
      50%, 100% { opacity: 0; }
    }

    /* SECRET LETTER OPENED (PASSWORD PAGE) */
    .secret-letter-wrapper {
      display: none;
      width: 100%;
      flex-direction: column;
      align-items: center;
      gap: 16px;
      animation: fadeInSoft 0.7s ease;
    }

    @keyframes fadeInSoft {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .password-area {
      text-align: center;
      margin-bottom: 4px;
    }

    .secret-title {
      font-size: 15px;
      color: #6b4a3c;
      margin-bottom: 10px;
    }

    #secretPassword {
      padding: 8px 12px;
      border-radius: 999px;
      border: 1px solid #e1b9c9;
      outline: none;
      font-size: 14px;
      min-width: 70%;
      text-align: center;
      margin-bottom: 8px;
      background: #fff7fb;
    }

    #unlockSecretBtn {
      padding: 7px 18px;
      border-radius: 999px;
      border: none;
      font-size: 14px;
      font-weight: 600;
      background: linear-gradient(135deg, #ff84b9, #ffc3d9);
      color: #5a2336;
      cursor: pointer;
      box-shadow: 0 8px 16px rgba(0,0,0,0.25);
    }

    .password-hint {
      font-size: 13px;
      color: #aa6c77;
      min-height: 18px;
      margin-top: 4px;
    }

    .password-hint.error {
      color: #c4414f;
    }

    /* SECRET FULL PAGE (AFTER UNLOCK) */
    .secret-full-wrapper {
      display: none;
      width: 100%;
      flex-direction: column;
      align-items: center;
      gap: 16px;
      animation: fadeInSoft 0.7s ease;
    }

    /* REPLY BUTTON */
    .reply-button {
      padding: 9px 22px;
      background: linear-gradient(135deg, #ff4b8b, #ff758c);
      border: none;
      border-radius: 999px;
      color: white;
      display: none;
      font-size: 15px;
      font-weight: 600;
      opacity: 0;
      transition: opacity 0.4s, transform 0.4s;
      box-shadow: 0 8px 18px rgba(0,0,0,0.3);
      transform: translateY(4px);
    }

    .reply-button.show {
      display: inline-block;
      opacity: 1;
      transform: translateY(0);
    }

    /* REPLY LETTER */
    .reply-wrapper {
      display: none;
      flex-direction: column;
      align-items: center;
    }

    textarea {
      width: 100%;
      height: 200px;
      font-size: 15px;
      outline: none;
      resize: none;
      border: none;
      background: transparent;
      font-family: Georgia, serif;
      line-height: 1.6;
      color: #3f2f21;
    }

    #sendReplyBtn {
      margin-top: 12px;
      padding: 10px 22px;
      background: linear-gradient(135deg, #ff4b8b, #ff758c);
      color: #fff;
      border: none;
      border-radius: 999px;
      font-size: 14px;
      cursor: pointer;
      font-weight: 600;
      box-shadow: 0 8px 18px rgba(0,0,0,0.3);
    }

    /* FLOATING HEARTS */
    .floating-heart {
      position: fixed;
      font-size: 20px;
      pointer-events: none;
      animation: floatUp 3s ease-out forwards;
      z-index: 999;
    }

    @keyframes floatUp {
      0% { transform: translateY(0) scale(0.8); opacity: 1; }
      100% { transform: translateY(-150px) scale(1.3); opacity: 0; }
    }

    /* TOP NOTIFICATION (iPhone-style) */
    .new-letter-banner {
      position: fixed;
      top: 12px;
      left: 50%;
      transform: translateX(-50%) translateY(-40px);
      background: rgba(20, 16, 37, 0.9);
      color: #fff;
      padding: 10px 16px;
      border-radius: 999px;
      min-width: 260px;
      max-width: 360px;
      display: none;
      flex-direction: column;
      gap: 2px;
      box-shadow: 0 14px 30px rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      z-index: 1200;
      cursor: pointer;
      opacity: 0;
    }

    .new-letter-banner.show {
      display: flex;
      animation: bannerDrop 0.5s ease forwards;
    }

    @keyframes bannerDrop {
      from {
        opacity: 0;
        transform: translateX(-50%) translateY(-40px);
      }
      to {
        opacity: 1;
        transform: translateX(-50%) translateY(0);
      }
    }

    .banner-title {
      font-size: 14px;
      font-weight: 600;
    }

    .banner-subtitle {
      font-size: 12px;
      opacity: 0.9;
    }

    @media (max-width: 480px) {
      .heart {
        width: 140px;
        height: 120px;
      }
      .letter-paper {
        padding: 16px 14px;
      }
      .letter-body {
        font-size: 15px;
      }
    }
  </style>
</head>
<body>

  <!-- üéµ MUSIC: must be in same folder, named music.mp3 -->
  <audio id="bgMusic" src="music.mp3" preload="auto"></audio>

  <!-- HEART SCREEN -->
  <div class="heart-screen" id="heartScreen">
    <div class="heart" id="heart">
      <div class="heart-text">
        Listen to it... üíì<br/>(Tap this heart)
      </div>
    </div>
    <div class="hint-text">
        The untold storyüíò <br>
      Is dil ke andar tumhaare liye ek chhota sa khat chhupa hai... üíå
    </div>
  </div>

  <!-- TOP NOTIFICATION -->
  <div id="newLetterBanner" class="new-letter-banner">
    <div class="banner-title">New letter received üíå</div>
    <div class="banner-subtitle">Tap to read the secret part...</div>
  </div>

  <!-- MAIN SCENE -->
  <div class="scene" id="scene">
    <!-- Sealed Letter 1 -->
    <div class="closed-letter" id="closedLetter">
      <div class="flap"></div>
      <div class="seal">üåπ</div>
      <div class="closed-letter-text">Tap to open this letter...</div>
    </div>

    <!-- OPEN LETTER (FIRST PART) -->
    <div class="letter-wrapper" id="letterWrapper">
      <div class="letter-paper">
        <div class="letter-body">
          <span id="confessionText"></span><span class="cursor" id="cursor">|</span>
        </div>
      </div>
    </div>

    <!-- SECRET SEALED LETTER (SECOND PART) -->
    <div class="closed-letter secret-letter" id="secretLetterClosed">
      <div class="flap flap-secret"></div>
      <div class="seal secret-seal">ü§ç</div>
      <div class="closed-letter-text">A secret part of my heart... Tap to unlock üåπ</div>
    </div>

    <!-- OPEN SECRET LETTER (PASSWORD PAGE) -->
    <div class="secret-letter-wrapper" id="secretLetterWrapper">
      <div class="letter-paper">
        <div class="letter-body">
          <div class="password-area">
            <p class="secret-title">
              Yeh hissa sirf tumhaare liye hai... ek chhote se secret shabd ke peeche chhupa hua üîê
            </p>
            <input type="password" id="secretPassword" placeholder="Enter the secret word" />
            <br />
            <button id="unlockSecretBtn">Unlock üí´</button>
            <p id="passwordHint" class="password-hint"></p>
          </div>
        </div>
      </div>
    </div>

    <!-- SECRET FULL PAGE (POEM ONLY) -->
    <div class="secret-full-wrapper" id="secretFullWrapper">
      <div class="letter-paper">
        <div class="letter-body">
          <span id="secretFullText"></span><span class="cursor" id="secretCursor">|</span>
        </div>
      </div>
      <button class="reply-button" id="replyButton">Reply to this letter ‚úçÔ∏è</button>
    </div>

    <!-- HER REPLY -->
    <div class="reply-wrapper" id="replyWrapper">
      <div class="letter-paper">
        <div class="letter-body">
          <textarea id="herReplyBox" placeholder="Type your reply here..."></textarea>
          <button id="sendReplyBtn">Yes &amp; Send üíå</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    const heart = document.getElementById("heart");
    const heartScreen = document.getElementById("heartScreen");
    const scene = document.getElementById("scene");
    const closedLetter = document.getElementById("closedLetter");
    const letterWrapper = document.getElementById("letterWrapper");
    const confessionSpan = document.getElementById("confessionText");
    const cursor = document.getElementById("cursor");

    const secretLetterClosed = document.getElementById("secretLetterClosed");
    const secretLetterWrapper = document.getElementById("secretLetterWrapper");
    const secretPasswordInput = document.getElementById("secretPassword");
    const unlockSecretBtn = document.getElementById("unlockSecretBtn");
    const passwordHint = document.getElementById("passwordHint");

    const secretFullWrapper = document.getElementById("secretFullWrapper");
    const secretFullText = document.getElementById("secretFullText");
    const secretCursor = document.getElementById("secretCursor");

    const replyButton = document.getElementById("replyButton");
    const replyWrapper = document.getElementById("replyWrapper");
    const herReplyBox = document.getElementById("herReplyBox");
    const sendReplyBtn = document.getElementById("sendReplyBtn");
    const bgMusic = document.getElementById("bgMusic");

    const newLetterBanner = document.getElementById("newLetterBanner");

    // üëâ CHANGE THIS PASSWORD AS YOU LIKE
    const SECRET_PASSWORD = "nazma"; // ‚Üê change later to whatever you tell her

    // Music: start at 5:04 (304s), play to END of song
    const MUSIC_START = 306; // seconds
    let fadeInInterval = null;
    let fadeOutInterval = null;

    function startMusicFromOffset() {
      clearInterval(fadeInInterval);
      clearInterval(fadeOutInterval);
      if (!bgMusic) return;

      const doStart = () => {
        try {
          bgMusic.currentTime = MUSIC_START;
        } catch (e) {}

        bgMusic.volume = 0;
        bgMusic.play().then(() => {
          if (Math.abs(bgMusic.currentTime - MUSIC_START) > 0.5) {
            bgMusic.currentTime = MUSIC_START;
          }

          let vol = 0;
          fadeInInterval = setInterval(() => {
            if (vol < 0.45) {
              vol += 0.03;
              bgMusic.volume = vol;
            } else {
              clearInterval(fadeInInterval);
            }
          }, 180);
        }).catch(() => {});
      };

      if (bgMusic.readyState >= 1) {
        doStart();
      } else {
        const onMeta = () => {
          bgMusic.removeEventListener("loadedmetadata", onMeta);
          doStart();
        };
        bgMusic.addEventListener("loadedmetadata", onMeta);
      }
    }

    function fadeOutMusic() {
      clearInterval(fadeInInterval);
      clearInterval(fadeOutInterval);
      if (!bgMusic) return;

      let vol = bgMusic.volume;
      fadeOutInterval = setInterval(() => {
        if (vol > 0) {
          vol -= 0.04;
          if (vol < 0) vol = 0;
          bgMusic.volume = vol;
        } else {
          clearInterval(fadeOutInterval);
          bgMusic.pause();
          bgMusic.currentTime = 0;
        }
      }, 160);
    }

    // LOVE LETTER SPLIT INTO TWO PARTS
    const mainConfessionText = `Hi Nazma,
You‚Äôre someone with whom I spoke very little, but somehow felt a lot. Back when I was in 5th grade, I didn‚Äôt understand what that attraction meant. But when the time came for me to change my school, it felt like a small part of me was missing‚Äîthough I couldn‚Äôt fully understand it then.

Even in 10th grade, when I received a few proposals, I rejected them‚Äînot because there was no connection, but because I had never really forgotten you. And even today, I still haven‚Äôt figured out exactly what that feeling is.

Two years ago, when your ID suddenly appeared in my feed, I felt something I can't quite describe. It wasn‚Äôt just happiness‚Äîit felt like finding something precious that I had lost. Later, I realized it wasn‚Äôt actually you, and I moved on. But after a year, I finally found your real profile.

I never confessed any of this because I didn‚Äôt want to, and maybe I was scared. I tried to keep my distance because the work I‚Äôm doing, and the things I‚Äôm building, are my top priorities right now. But the urge to tell you the truth keeps distracting me, and I don‚Äôt want to regret staying silent forever.
So‚Ä¶ here I am, finally saying it`;

    const secretConfessionText =`Be my peace in my chaos,
Be my home where I can always return to.
Be the warmth my cold days search for,
Be the calm my restless nights dream of.
And if destiny allows, be the love my heart has been waiting for`;

    // TYPEWRITER (supports custom cursor)
    function typeWriter(element, text, speed, done, cursorEl) {
      const c = cursorEl || cursor;
      if (c) c.style.display = "inline-block";

      element.textContent = "";
      let i = 0;

      function type() {
        if (i < text.length) {
          element.textContent += text.charAt(i);
          i++;
          setTimeout(type, speed);
        } else {
          if (c) c.style.display = "none";
          if (done) done();
        }
      }
      type();
    }

    function spawnHearts() {
      for (let i = 0; i < 18; i++) {
        setTimeout(() => {
          const h = document.createElement("div");
          h.className = "floating-heart";
          h.textContent = "üíñ";
          h.style.left = Math.random() * 100 + "vw";
          h.style.bottom = "0px";
          document.body.appendChild(h);
          setTimeout(() => h.remove(), 3000);
        }, i * 120);
      }
    }

    function showNewLetterBanner() {
      newLetterBanner.classList.add("show");
    }

    // HEART CLICK ‚Üí show scene + sealed letter 1
    heart.addEventListener("click", () => {
      heartScreen.style.display = "none";
      scene.style.display = "flex";
      closedLetter.style.display = "block";
    });

    // CLICK CLOSED LETTER 1 ‚Üí open, play music, typewriter first part
    closedLetter.addEventListener("click", () => {
      closedLetter.style.display = "none";
      letterWrapper.style.display = "flex";

      startMusicFromOffset();

      typeWriter(confessionSpan, mainConfessionText, 35, () => {
        // After first letter completes, wait 8 seconds, then show top banner
        setTimeout(() => {
          showNewLetterBanner();
        }, 3000);
      }, cursor);
    });

    // CLICK TOP BANNER ‚Üí show second sealed letter
    newLetterBanner.addEventListener("click", () => {
      newLetterBanner.style.display = "none";
      spawnHearts();
      letterWrapper.style.display = "none";
      secretLetterClosed.style.display = "block";
    });

    // CLICK SECRET SEALED LETTER ‚Üí show password page
    secretLetterClosed.addEventListener("click", () => {
      secretLetterClosed.style.display = "none";
      secretLetterWrapper.style.display = "flex";
      setTimeout(() => {
        secretPasswordInput.focus();
      }, 300);
    });

    function goToSecretFullPage() {
      passwordHint.textContent = "";
      passwordHint.classList.remove("error");

      secretLetterWrapper.style.display = "none";
      secretFullWrapper.style.display = "flex";

      typeWriter(
        secretFullText,
        secretConfessionText,
        38,
        () => {
          replyButton.classList.add("show");
        },
        secretCursor
      );
    }

    // UNLOCK BUTTON
    unlockSecretBtn.addEventListener("click", () => {
      const entered = secretPasswordInput.value.trim().toLowerCase();

      if (!entered) {
        passwordHint.textContent = "Pehle secret word likho na üíñ";
        passwordHint.classList.add("error");
        return;
      }

      if (entered === SECRET_PASSWORD.toLowerCase()) {
        goToSecretFullPage();
      } else {
        passwordHint.textContent = "Shayad yeh sahi shabd nahi hai... phir se try karo üòä";
        passwordHint.classList.add("error");
      }
    });

    // ENTER key on password field
    secretPasswordInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        unlockSecretBtn.click();
      }
    });

    // Reply button ‚Üí fade out music + show reply letter
    replyButton.addEventListener("click", () => {
      fadeOutMusic();
      secretFullWrapper.style.display = "none";
      replyWrapper.style.display = "flex";
    });

    // Send reply ‚Üí hearts + WhatsApp
    sendReplyBtn.addEventListener("click", () => {
      const replyText = herReplyBox.value.trim();
      if (!replyText) {
        alert("Pehle apna reply likho na üíå");
        return;
      }

      spawnHearts();

      const phone = "917013780825"; // your number with country code
      const message = encodeURIComponent(
        "My reply to your letter:\n\n" + replyText + "\n\nüíå"
      );
      setTimeout(() => {
        window.location.href = `https://wa.me/${phone}?text=${message}`;
      }, 1200);
    });
  </script>
</body>
</html>